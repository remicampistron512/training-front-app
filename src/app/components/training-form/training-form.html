<form #trainingForm="ngForm" (ngSubmit)="onSubmit(trainingForm)" novalidate class="container">
  <div class="mb-3">
    <label for="name" class="form-label">Nom</label>
    <input
      id="name"
      name="name"
      type="text"
      class="form-control"
      required
      minlength="2"
      [(ngModel)]="model.name"
      #name="ngModel"
      [class.is-invalid]="name.invalid && (name.dirty || name.touched)"
    />

    @if (name.invalid && (name.dirty || name.touched)) {
      <div class="invalid-feedback d-block">
        @if (name.errors?.['required']) {
          <div>Le nom est obligatoire.</div>
        }
        @if (name.errors?.['minlength']) {
          <div>Le nom doit contenir au moins 2 caractères.</div>
        }
      </div>
    }
  </div>

  <div class="mb-3">
    <label for="description" class="form-label">Description</label>
    <textarea
      id="description"
      name="description"
      class="form-control"
      rows="4"
      required
      minlength="10"
      [(ngModel)]="model.description"
      #description="ngModel"
      [class.is-invalid]="description.invalid && (description.dirty || description.touched)"
    ></textarea>

    @if (description.invalid && (description.dirty || description.touched)) {
      <div class="invalid-feedback d-block">
        @if (description.errors?.['required']) {
          <div>La description est obligatoire.</div>
        }
        @if (description.errors?.['minlength']) {
          <div>La description doit contenir au moins 10 caractères.</div>
        }
      </div>
    }
  </div>

  <div class="mb-3">
    <label for="price" class="form-label">Prix</label>
    <div class="input-group">
      <span class="input-group-text">€</span>
      <input
        id="price"
        name="price"
        type="number"
        class="form-control"
        required
        min="0"
        step="0.01"
        [(ngModel)]="model.price"
        #price="ngModel"
        [class.is-invalid]="price.invalid && (price.dirty || price.touched)"
      />
    </div>

    @if (price.invalid && (price.dirty || price.touched)) {
      <div class="invalid-feedback d-block">
        @if (price.errors?.['required']) {
          <div>Le prix est requis.</div>
        }
        @if (price.errors?.['min']) {
          <div>Le prix doit être supérieur ou égal à 0.</div>
        }
      </div>
    }
  </div>

  <div class="mb-3">
    <label for="quantity" class="form-label">Quantité</label>
    <input
      id="quantity"
      name="quantity"
      type="number"
      class="form-control"
      required
      min="0"
      step="1"
      [(ngModel)]="model.quantity"
      #quantity="ngModel"
      [class.is-invalid]="quantity.invalid && (quantity.dirty || quantity.touched)"
    />

    @if (quantity.invalid && (quantity.dirty || quantity.touched)) {
      <div class="invalid-feedback d-block">
        @if (quantity.errors?.['required']) {
          <div>La quantité est requise.</div>
        }
        @if (quantity.errors?.['min']) {
          <div>La quantité doit être supérieure ou égale à 0.</div>
        }
      </div>
    }
  </div>

  <div class="d-flex gap-2 mt-4">
    <button type="submit" class="btn btn-primary" [disabled]="trainingForm.invalid">
      Créer la formation
    </button>

    <button type="button" class="btn btn-outline-secondary" (click)="trainingForm.resetForm(defaultModel)">
      Réinitialiser
    </button>
  </div>
</form>
