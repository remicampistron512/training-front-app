<div>
  <div class="d-flex gap-2 mb-3 align-items-center">
    <label class="form-label mb-0">Max price:</label>

    <input
      type="number"
      class="form-control"
      style="width:160px"
      min="0"
      name="maxPrice"
      [ngModel]="maxPrice"
      (ngModelChange)="setMaxPrice($event)"
      placeholder="e.g. 600"
    />

    <button class="btn btn-outline-secondary" type="button" (click)="setMaxPrice(null)">
      Clear
    </button>
  </div>
  @if (filteredTrainings?.length) {
    <ng-container>


      @if (flash) {
        <div class="alert alert-{{ flash.type }} alert-dismissible fade show" role="alert">
          {{ flash.text }}
          <button type="button" class="btn-close" aria-label="Close" (click)="closeFlash()"></button>
        </div>
      }
      <button routerLink="/training-form" class="btn btn-primary">Ajouter formation</button>
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th role="button" (click)="setSort('id')">ID</th>
          <th role="button" (click)="setSort('name')">Name</th>
          <th role="button" (click)="setSort('description')">Description</th>
          <th role="button" (click)="setSort('price')">Price</th>
        </tr>
        </thead>

        <tbody>

          @for (training of filteredTrainings; track training.id) {
            <tr>
              <td>{{ training.id }}</td>
              <td>{{ training.name }}</td>
              <td>{{ training.description }}</td>
              <td>{{ training.price }}</td>
              <td>
                <button [routerLink]="'/trainings/' + training.id + '/edit'" class="btn btn-primary">
                  Modifier
                </button>
              </td>
              <td><button (click)="removeTraining(training.id)"  class="btn btn-danger">Supprimer</button></td>
            </tr>
          }

        </tbody>
      </table>
    </ng-container>
  } @else {
    @if ((searchTerm?.trim()?.length ?? 0) > 0 || maxPrice !== null) {
      <p>No trainings match your filters.</p>
    } @else {
      <p>No trainings available.</p>
    }
  }
</div>
